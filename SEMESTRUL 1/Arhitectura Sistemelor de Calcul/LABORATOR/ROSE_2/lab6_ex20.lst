     1                                  bits 32
     2                                  global start
     3                                  
     4                                  extern exit, printf
     5                                  import exit msvcrt.dll
     6                                  import printf msvcrt.dll
     7                                  
     8                                  segment data use32 class=data
     9 00000000 616E6120617265206D-     	text db "ana are mere capac un cojoc otto "
     9 00000009 657265206361706163-
     9 00000012 20756E20636F6A6F63-
     9 0000001B 206F74746F20       
    10                                      len equ $-text      ; numarul de caractere din text
    11                                      
    12 00000021 00<rept>                    cuvant times 50 db 0    ; 00 00 00 00 00
    13 00000053 00<rept>                    invers times 50 db 0    ; era
    14                                      
    15 00000085 437576616E743A2025-         format db "Cuvant: %s", 13, 10, 0
    15 0000008E 730D0A00           
    16                                      
    17                                  ; 20. Se da un sir de octeti reprezentand un text (succesiune de cuvinte separate de spatii).
    18                                  ; Sa se identifice cuvintele de tip palindrom (ale caror oglindiri sunt similare cu cele de
    19                                  ; plecare): "cojoc", "capac" etc.
    20                                  segment code use32 class=code
    21                                          ; reinitializez sirul cuvant
    22                                      reset:
    23 00000000 60                              pushad
    24 00000001 B932000000                      mov ecx, 50
    25 00000006 FC                              cld
    26 00000007 BF[21000000]                    mov edi, cuvant
    27 0000000C B000                            mov al, 0
    28 0000000E F3AA                            rep stosb
    29                                          
    30 00000010 61                              popad
    31 00000011 C3                              ret
    32                                  
    33                                      ; aici incepe programul
    34                                      start:
    35 00000012 B921000000                      mov ecx, len
    36 00000017 FC                              cld
    37 00000018 BE[00000000]                    mov esi, text       ; parcurg text
    38                                      urmator:
    39 0000001D BF[21000000]                    mov edi, cuvant     ; parcurg cuvant
    40 00000022 BB00000000                      mov ebx, 0          ; contor litere din fiecare cuvant
    41 00000027 E8D4FFFFFF                      call reset
    42                                      repeta:
    43                                          ; citesc caracter
    44 0000002C AC                              lodsb
    45                                          
    46                                          ; verific daca e SPATIU
    47 0000002D 3C20                            cmp al, ' '
    48 0000002F 7424                            je verifica
    49                                          
    50                                          ; daca nu e SPATIU il stochez
    51 00000031 AA                              stosb
    52 00000032 43                              inc ebx
    53 00000033 E2F7                            loop repeta
    54                                      
    55 00000035 6A00                            push dword 0
    56 00000037 FF15[00000000]                  call [exit]
    57                                      
    58                                      ; inversez cuvantul curent
    59                                  inverseaza:
    60 0000003D 60                          pushad
    61 0000003E 89D9                        mov ecx, ebx
    62 00000040 BE[21000000]                mov esi, cuvant
    63 00000045 BF[53000000]                mov edi, invers
    64 0000004A 01DF                        add edi, ebx
    65 0000004C 4F                          dec edi
    66                                  .repeta:
    67 0000004D FC                          cld
    68 0000004E AC                          lodsb
    69 0000004F FD                          std
    70 00000050 AA                          stosb
    71 00000051 E2FA                        loop .repeta
    72                                      
    73 00000053 61                          popad
    74 00000054 C3                          ret
    75                                      
    76                                  verifica:
    77 00000055 60                          pushad
    78                                      
    79                                      ; inversez cuvantul curent
    80 00000056 E8E2FFFFFF                  call inverseaza
    81                                      
    82                                      ; verific daca e palindrom
    83 0000005B 89D9                        mov ecx, ebx        ; numarul de litere al cuvantului curent
    84 0000005D FC                          cld
    85 0000005E BE[21000000]                mov esi, cuvant
    86 00000063 BF[53000000]                mov edi, invers
    87 00000068 F3A6                        repe cmpsb
    88                                      
    89 0000006A 83F900                      cmp ecx, 0
    90 0000006D 7513                        jne peste
    91                                      
    92                                      ; e palindrom
    93                                      ; printf(format, cuvant)
    94 0000006F 68[21000000]                push dword cuvant
    95 00000074 68[85000000]                push dword format
    96 00000079 FF15[00000000]              call [printf]
    97 0000007F 83C408                      add esp, 2*4
    98                                      
    99                                   peste:
   100 00000082 61                          popad
   101 00000083 EB98                        jmp urmator
